<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="./resources/wrenchIcon.png" type="image/png"/>
    <title>Technic Solder</title>

    <link rel="stylesheet" href="/resources/bootstrap/bootstrap.min.css">
    <script src="/resources/js/jquery.min.js"></script>
    <script src="/resources/js/popper.min.js"></script>
    <script src="/resources/bootstrap/bootstrap.min.js"></script>
    <script src="/resources/js/fontawesome.js"></script>
    <script src="/resources/bootstrap/bootstrap-sortable.js"></script>
    <link rel="stylesheet" href="/resources/bootstrap/bootstrap-sortable.css" type="text/css">
    <style type="text/css">
        .menu-bars {
            vertical-align: middle;
            font-size: 34px;
            color: #2789C9;
            display: none;
            cursor: pointer;
        }

        .nav-tabs .nav-link {
            border: 1px solid transparent;
            border-top-left-radius: .25rem;
            border-top-right-radius: .25rem;
            background: #2F363F;
        }

        .nav-tabs .nav-link.active {
            color: white;
            background-color: #3E4956 !important;
            border-color: transparent !important;
        }

        .nav-tabs .nav-link {
            border: 1px solid transparent;
            border-top-left-radius: 0rem !important;
            border-top-right-radius: 0rem !important;
            width: 100%;
            padding: 12px;
            overflow: auto;
            color: #4F5F6D;
        }

        .tab-content > .active {
            display: block;
            min-height: 165px;
            overflow: auto;
        }

        .nav-tabs .nav-item {
            width: 102%
        }

        .nav-tabs .nav-link:hover {
            border: 1px solid transparent;
            color: white;
        }

        .nav.nav-tabs {
            float: left;
            display: block;
            border-bottom: 0;
            border-right: 1px solid transparent;
            background-color: #2F363F;
        }

        .tab-content .tab-pane .text-muted {
            padding-left: 4em;
            margin: 1em;
        }

        .modpack {
            color: white;
            overflow: hidden;
            cursor: pointer;
            white-space: nowrap;
        }

        .modpack p {
            margin: 16px;
        }

        .modpack:hover {
            background-color: #2776B3;
        }

        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #2776B3;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #1766A3;
        }

        .info-versions .nav-item {
            margin: 5px;
        }

        a:hover {
            text-decoration: none;
        }

        .main {
            margin: 2em;
            margin-left: 22em;
            transition: 0.5s;
        }

        .card {
            padding: 2em;
            margin: 2em 0;
        }

        .upload-mods {
            border-radius: 5px;
            width: 100%;
            height: 15em;

            background-color: #ddd;

            transition: 0.2s;
        }

        .upload-mods input {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0px;
            left: 0px;
            opacity: 0.0001;
            cursor: pointer;
        }

        .upload-mods center {
            position: absolute;
            width: 20em;
            top: 8em;
            left: calc(50% - 10em);
        }

        .upload-mods:hover {
            background-color: #ccc;
        }

        .sidenav {
            width: 20em;
            height: 100%;
            position: fixed;
            background-color: #3E4956;
            z-index: 1050;
            transition: 0.5s;
        }

        #logindiv {
            width: 25em;
            margin: auto;
            margin-top: 15em;
            padding: 0px
        }

        .d-icon {
            font-size: 0.5em;
            vertical-align: middle;
            margin-right: 0.5em;
        }

        .w-text {
            vertical-align: middle;
        }

        @media only screen and (min-width: 1001px) {
            #logoutside {
                display: none;
            }
        }

        @media only screen and (min-width: 1251px), (max-width: 780px) {
            .w-sm {
                display: none;
            }
        }

        @media only screen and (max-width: 780px) {
            .row {
                display: block;
            }

            .col-4 {
                max-width: unset;
            }
        }

        @media only screen and (max-width: 1250px) and (min-width: 781px) {
            .w-lg {
                display: none;
            }
        }

        @media only screen and (max-width: 1500px) and (min-width: 781px), (max-width: 450px) {
            .d-icon {
                display: none;
            }
        }

        @media only screen and (max-width: 1000px) {
            .menu-bars {
                display: inline-block;
            }

            #logindiv {
                width: auto;
                margin-top: 5em;
            }

            #techniclogo {
                display: none !important;
            }

            #dropdownMenuButton, #solderinfo, #welcome {
                display: none;
            }

            .sidenav {
                margin-left: -20em;
                transition: 0.5s;
            }

            .sidenavexpand {
                margin-left: 0em;
                transition: 0.5s;
            }

            .main {
                margin-left: 2em;
                transition: 0.5s;
            }

            #logoutside {
                display: block;
            }
        }

    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<nav class="navbar navbar-light bg-white sticky-top">
    <span class="navbar-brand" href="#"><img id="techniclogo" alt="Technic logo" class="d-inline-block align-top"
                                             height="46px" src="/resources/wrenchIcon.svg"><em id="menuopen"
                                                                                               class="fas fa-bars menu-bars"></em> Technic Solder <span
                id="solderinfo">1.0</span></span></span>
    <span style="cursor: pointer;" class="dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
    <span class="navbar-text">TestName</span>
                <div style="left: unset;right: 2px;" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="?logout=true&logout=true"
                       onclick="window.location = window.location+'?logout=true&logout=true'">Log Out</a>
                    <a class="dropdown-item" href="./user" onclick="window.location = './user'">My account</a>
                </div>
            </span>

</nav>
<script type="text/javascript">
    $(".navbar-brand").click(function () {
        $("#sidenav").toggleClass("sidenavexpand");
    });
</script>
<div id="sidenav" class="text-white sidenav">
    <ul class="nav nav-tabs" style="height:100%">
        <li class="nav-item">
            <a class="nav-link " href="{{ url }}/dashboard"><em class="fas fa-tachometer-alt fa-lg"></em></a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="#modpacks" data-toggle="tab" role="tab"><em
                        class="fas fa-boxes fa-lg"></em></a>
        </li>
        <li class="nav-item">
            <a id="nav-mods" class="nav-link" href="#mods" data-toggle="tab" role="tab"><em
                        class="fas fa-book fa-lg"></em></a>
        </li>
        <li class="nav-item">
            <a id="nav-settings" class="nav-link" href="#settings" data-toggle="tab" role="tab"><em
                        class="fas fa-sliders-h fa-lg"></em></a>
        </li>
        <div style="position:absolute;bottom:5em;left:4em;" class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input"
                   name="dark" id="dark">
            <label class="custom-control-label" for="dark">Dark theme</label>
        </div>
    </ul>
    <script type="text/javascript">
        $("#dark").click(function () {
            if ($("#dark").is(":checked")) {
                if (window.location.href.indexOf("?light") > -1 || window.location.href.indexOf("&light") > -1) {
                    if (window.location.href.indexOf("?light") > -1) {
                        window.location.href = window.location.href.replace("?light", "?dark");
                    } else {
                        window.location.href = window.location.href.replace("&light", "&dark");
                    }
                } else {
                    if (window.location.href.indexOf("?") > -1) {
                        window.location.href = window.location.href + "&dark";
                    } else {
                        window.location.href = window.location.href + "?dark";
                    }
                }
            } else {
                if (window.location.href.indexOf("?dark") > -1 || window.location.href.indexOf("&dark") > -1) {
                    if (window.location.href.indexOf("?dark") > -1) {
                        window.location.href = window.location.href.replace("?dark", "?light");
                    } else {
                        window.location.href = window.location.href.replace("&dark", "&light");
                    }
                } else {
                    if (window.location.href.indexOf("?") > -1) {
                        window.location.href = window.location.href + "&light";
                    } else {
                        window.location.href = window.location.href + "?light";
                    }
                }
            }
        });
    </script>
    <div class="tab-content">
        <div class="tab-pane active" id="modpacks" role="tabpanel">
            <div style="overflow:auto;height: calc( 100% - 62px )">
                <p class="text-muted">MODPACKS</p>
                {% for modpack in modpacks %}

                    <a href="{{ url }}/dashboard/modpack/{{ modpack['id'] }}">
                        <div class="modpack">
                            <p class="text-white"><img alt="{{ modpack['display_name'] }}"
                                                       class="d-inline-block align-top" height="25px"
                                        {{ modpack|json_encode|raw }}
                                                       src="{% if modpack['external']['icon'] is defined and modpack['external']['icon']['url'] != "" %}{{ modpack['external']['icon']['url'] }}{% else %}/resources/default/icon.png{% endif %}">{{ modpack['display_name'] }}
                            </p>
                        </div>
                    </a>


                {% endfor %}
                <a href="./dashboard/modpack/create">
                    <div class="modpack">
                        <p><em style="height:25px" class="d-inline-block align-top fas fa-plus-circle"></em> Add Modpack
                        </p>
                    </div>
                </a>
            </div>
        </div>
        <div class="tab-pane" id="mods" role="tabpanel">
            <p class="text-muted">LIBRARIES</p>
            <a href="{{ url }}/dashboard/lib/mods">
                <div class="modpack">
                    <p><em class="fas fa-cubes fa-lg"></em> <span style="margin-left:inherit;">Mod library</span></p>
                </div>
            </a>
            <a href="{{ url }}/dashboard/lib/forges">
                <div class="modpack">
                    <p><em class="fas fa-database fa-lg"></em> <span style="margin-left:inherit;">Forge versions</span>
                    </p>
                </div>
            </a>
            <a href="{{ url }}/dashboard/lib/other">
                <div class="modpack">
                    <p><em class="far fa-file-archive fa-lg"></em> <span style="margin-left:inherit;">Other files</span>
                    </p>
                </div>
            </a>
        </div>
        <div class="tab-pane" id="settings" role="tabpanel">
            <div style="overflow:auto;height: calc( 100% - 62px )">
                <p class="text-muted">SETTINGS</p>
                <?php if ($_SESSION['user']==$config['mail']) { ?>
                <a href="./settings">
                    <div class="modpack">
                        <p><em class="fas fa-cog fa-lg"></em> <span style="margin-left:inherit;">Quick settings</span>
                        </p>
                    </div>
                </a>
                <a href="./configure.php?reconfig">
                    <div class="modpack">
                        <p><em class="fas fa-cogs fa-lg"></em> <span
                                    style="margin-left:inherit;">Solder Configuration</span></p>
                    </div>
                </a>
                <a href="./admin">
                    <div class="modpack">
                        <p><em class="fas fa-user-tie fa-lg"></em> <span style="margin-left:inherit;">Admin</span></p>
                    </div>
                </a>
                <?php } else { ?>
                <a href="./user">
                    <div class="modpack">
                        <p><em class="fas fa-user fa-lg"></em> <span style="margin-left:inherit;">My Account</span></p>
                    </div>
                </a>
                <?php } ?>
                <?php if (substr($_SESSION['perms'],6,1)=="1") { ?>
                <a href="./clients">
                    <div class="modpack">
                        <p><em class="fas fa-users fa-lg"></em> <span style="margin-left:inherit;">Clients</span></p>
                    </div>
                </a>
                <?php } ?>
                <a href="./about">
                    <div class="modpack">
                        <p><em class="fas fa-info-circle fa-lg"></em> <span
                                    style="margin-left:inherit;">About Solder.cf</span></p>
                    </div>
                </a>
                <a href="./update">
                    <div class="modpack">
                        <p><em class="fas fa-arrow-alt-circle-up fa-lg"></em> <span
                                    style="margin-left:inherit;">Update</span></p>
                    </div>
                </a>
                <a style="margin-bottom: 3em;" href="?logout=true&logout=true" id="logoutside">
                    <div class="modpack">
                        <p><em class="fas fa-sign-out-alt fa-lg"></em> <span style="margin-left:inherit;">Logout</span>
                        </p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>